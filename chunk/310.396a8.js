"use strict";(self.webpackChunkSamsara=self.webpackChunkSamsara||[]).push([[310],{8310:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* binding */ Trajectory)\n/* harmony export */ });\n/* harmony import */ var core_js_modules_esnext_iterator_constructor_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(9070);\n/* harmony import */ var core_js_modules_esnext_iterator_for_each_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1847);\n/* harmony import */ var core_js_modules_esnext_iterator_map_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2988);\n\n\n\nclass Trajectory extends ui.view.DefaultTheme.TrajectoryUI {\n  constructor() {\n    super();\n    let pos1 = [0, 0];\n    this.panelTrajectory.on(Laya.Event.MOUSE_DOWN, this, e => pos1 = [e.stageX, e.stageY]);\n    this.panelTrajectory.on(Laya.Event.MOUSE_UP, this, e => {\n      const distanceX = e.stageX - pos1[0];\n      const distanceY = e.stageY - pos1[1];\n      if (Math.sqrt(Math.abs(distanceX) + Math.abs(distanceY)) > 10) {\n        return;\n      }\n      this.onNext();\n    });\n    this.btnSummary.on(Laya.Event.CLICK, this, this.onSummary);\n    this.panelTrajectory.vScrollBar.elasticDistance = 150;\n    this.scbSpeed.on(Laya.Event.CHANGE, this, () => this.speed = this.scbSpeed.value);\n    this.scbSpeed.on(Laya.Event.MOUSE_UP, this, () => this.onNext());\n  }\n  AGE = {\n    0: 0,\n    1: 1,\n    2: 2,\n    3: 2,\n    4: 3,\n    5: 3,\n    6: 4,\n    7: 5,\n    8: 5,\n    9: 6,\n    10: 6,\n    11: 7,\n    12: 8,\n    13: 9,\n    14: 10,\n    15: 10,\n    16: 11,\n    17: 11,\n    18: 12,\n    19: 12,\n    20: 13,\n    21: 13,\n    22: 14,\n    23: 15,\n    24: 15,\n    25: 16,\n    26: 17,\n    27: 17,\n    28: 18,\n    29: 18,\n    30: 19,\n    31: 19,\n    32: 20,\n    33: 20,\n    34: 21,\n    35: 21,\n    36: 22,\n    37: 23,\n    38: 23,\n    39: 24,\n    40: 25,\n    41: 25,\n    42: 26,\n    43: 26,\n    44: 27,\n    45: 27,\n    46: 28,\n    47: 28,\n    48: 29,\n    49: 29,\n    50: 30,\n    51: 31,\n    52: 31,\n    53: 32,\n    54: 33,\n    55: 34,\n    56: 34,\n    57: 35,\n    58: 36,\n    59: 37,\n    60: 37,\n    61: 38,\n    62: 39,\n    63: 40,\n    64: 41,\n    65: 41,\n    66: 42,\n    67: 42,\n    68: 43,\n    69: 43,\n    70: 44,\n    71: 44,\n    72: 45,\n    73: 46,\n    74: 47,\n    75: 48,\n    76: 48,\n    77: 49,\n    78: 51,\n    79: 53,\n    80: 54,\n    81: 54,\n    82: 55,\n    83: 56,\n    84: 59,\n    85: 60,\n    86: 61,\n    87: 62,\n    88: 63,\n    89: 64,\n    90: 65,\n    91: 66,\n    92: 68,\n    93: 70,\n    94: 77,\n    95: 78,\n    96: 80,\n    97: 89,\n    98: 97,\n    102: 102\n  };\n  #speed;\n  #auto;\n  static load() {\n    return ["images/atlas/images/progress.atlas", \'images/atlas/images/slider.atlas\'];\n  }\n  static #createComponent = (() => Laya.plugin.extractComponents(Trajectory.uiView, [\'boxTrajectoryItem\']))();\n  #createTrajectoryItem() {\n    const item = Trajectory.#createComponent(\'boxTrajectoryItem\');\n    item.labContent = item.getChildByName(\'labContent\');\n    item.labAge = item.getChildByName(\'hboxAge\').getChildByName(\'labAge\');\n    const config = $ui.common.trajectoryItem;\n    $_.deepMapSet(item, config.box);\n    item.grade = grade => {\n      $_.deepMapSet(item, config.grade[grade || 0]);\n    };\n    item.getChildByName(\'hboxAge\')._childs.forEach(child => child.color = config.ageColor);\n    item.labContent.color = config.contentColor;\n    return item;\n  }\n  #isEnd;\n  // #trajectoryItems;\n  #talents;\n  #enableExtend;\n  #printText;\n  #effects;\n  init(_ref) {\n    let {\n      propertyAllocate,\n      talents,\n      enableExtend\n    } = _ref;\n    const types = core.PropertyTypes;\n    console.log(\'trajectory init\', propertyAllocate);\n    this.#printText = "";\n    this.#effects = {\n      "CHR": 0,\n      "INT": 0,\n      "STR": 0,\n      "MNY": 0,\n      "SPR": 0\n    };\n    const newProperty = this.initProperty(propertyAllocate);\n    if (newProperty[types.AFG] == 1) this.labCountry.text = "Afganistan";else if (newProperty[types.CHN] == 1) this.labCountry.text = "China";else if (newProperty[types.EGP] == 1) this.labCountry.text = "Egypt";else if (newProperty[types.IND] == 1) this.labCountry.text = "India";else if (newProperty[types.JPN] == 1) this.labCountry.text = "Japan";else if (newProperty[types.USA] == 1) this.labCountry.text = "USA";\n    this.labSex.text = newProperty[types.LBTQ] == 1 ? "LBTQ" : "Straight";\n    this.#enableExtend = enableExtend;\n    this.boxSpeed.visible = false;\n    this.scbSpeed.value = this.scbSpeed.max * 0.5; // init speed\n    this.btnSummary.visible = false;\n    // this.#trajectoryItems = [];\n    this.#isEnd = false;\n    this.#talents = talents;\n    core.start(newProperty);\n    this.updateProperty();\n    this.onNext();\n  }\n  close() {\n    this.scbSpeed.value = 0;\n    this.speed = 0;\n    // this.#trajectoryItems.forEach(item => {\n    //     item.removeSelf();\n    //     item.destroy();\n    // });\n    // this.#trajectoryItems = null;\n    this.#printText = "";\n  }\n  initProperty(propertyAllocate) {\n    const types = core.PropertyTypes;\n    var max = 0;\n    var newProperty = propertyAllocate;\n    if (propertyAllocate[types.CHR] > max) max = propertyAllocate[types.CHR];\n    if (propertyAllocate[types.INT] > max) max = propertyAllocate[types.INT];\n    if (propertyAllocate[types.STR] > max) max = propertyAllocate[types.STR];\n    if (propertyAllocate[types.MNY] > max) max = propertyAllocate[types.MNY];\n    if (propertyAllocate[types.SPR] > max) max = propertyAllocate[types.SPR];\n    // if any property > 8, add 5 to all other properties\n    if (max > 7) {\n      if (newProperty[types.CHR] < 8) newProperty[types.CHR] = newProperty[types.CHR] < 4 ? newProperty[types.CHR] + 5 : 8;\n      if (newProperty[types.INT] < 8) newProperty[types.INT] = newProperty[types.INT] < 4 ? newProperty[types.INT] + 5 : 8;\n      if (newProperty[types.STR] < 8) newProperty[types.STR] = newProperty[types.STR] < 4 ? newProperty[types.STR] + 5 : 8;\n      if (newProperty[types.MNY] < 8) newProperty[types.MNY] = newProperty[types.MNY] < 4 ? newProperty[types.MNY] + 5 : 8;\n      if (newProperty[types.SPR] < 8) newProperty[types.SPR] = newProperty[types.SPR] < 4 ? newProperty[types.SPR] + 5 : 8;\n    }\n\n    // Printing text\n    if (newProperty[types.AFG] == 1) this.#printText += "Country: Afganistan\\n";else if (newProperty[types.CHN] == 1) this.#printText += "Country: China\\n";else if (newProperty[types.EGP] == 1) this.#printText += "Country: Egypt\\n";else if (newProperty[types.IND] == 1) this.#printText += "Country: India\\n";else if (newProperty[types.JPN] == 1) this.#printText += "Country: Japan\\n";else if (newProperty[types.USA] == 1) this.#printText += "Country: USA\\n";\n    this.#printText += "Sex orientation: ";\n    this.#printText += (newProperty[types.LBTQ] == 1 ? "LBTQ" : "Straight") + "\\n";\n    this.#printText += "Appearance: " + newProperty[types.CHR] + "\\n";\n    this.#printText += "IQ: " + newProperty[types.INT] + "\\n";\n    this.#printText += "Healthy: " + newProperty[types.STR] + "\\n";\n    this.#printText += "Family wealth: " + newProperty[types.MNY] + "\\n";\n    this.#printText += "EQ: " + newProperty[types.SPR] + "\\n";\n    return newProperty;\n  }\n  updateProperty() {\n    const types = core.PropertyTypes;\n    const propertys = core.propertys;\n    this.labCharm.text = propertys[types.CHR] - this.#effects["CHR"];\n    this.labIntelligence.text = propertys[types.INT] - this.#effects["INT"];\n    this.labStrength.text = propertys[types.STR] - this.#effects["STR"];\n    this.labMoney.text = propertys[types.MNY] - this.#effects["MNY"];\n    this.labSpirit.text = propertys[types.SPR] - this.#effects["SPR"];\n  }\n  onNext() {\n    if (this.#isEnd) {\n      this.scbSpeed.value = 0;\n      this.speed = 0;\n      return;\n    }\n    const {\n      age,\n      content,\n      isEnd\n    } = core.next();\n    this.#isEnd = isEnd;\n    if (isEnd) {\n      this.boxSpeed.visible = false;\n      this.btnSummary.visible = true;\n      Laya.timer.frameOnce(1, this, () => {\n        this.panelTrajectory.scrollTo(0, this.panelTrajectory.contentHeight);\n      });\n    }\n\n    // empty events\n    if (JSON.stringify(content) == "{}") return;\n    this.panelTrajectory.scrollTo(0, this.panelTrajectory.contentHeight);\n    this.renderTrajectory(age, content);\n    this.updateProperty();\n    if (this.#isEnd) return;\n  }\n  renderTrajectory(age, content) {\n    const realAge = this.AGE[age];\n    const item = this.#createTrajectoryItem();\n    item.labAge.text = 2022 + realAge + \'\\n Age: \' + realAge;\n    item.labContent.text = content.map(_ref2 => {\n      let {\n        type,\n        description,\n        effect,\n        name,\n        postEvent\n      } = _ref2;\n      if (effect) {\n        if (effect.CHR) {\n          this.#effects["CHR"] = effect.CHR;\n          this.labCharmAdd.visible = true;\n          this.labCharmAdd.text = effect.CHR > 0 ? \'+\' + effect.CHR : effect.CHR;\n        }\n        if (effect.INT) {\n          this.#effects["INT"] = effect.INT;\n          this.labIntelligenceAdd.visible = true;\n          this.labIntelligenceAdd.text = effect.INT > 0 ? \'+\' + effect.INT : effect.INT;\n        }\n        if (effect.STR) {\n          this.#effects["STR"] = effect.STR;\n          this.labStrengthAdd.visible = true;\n          this.labStrengthAdd.text = effect.STR > 0 ? \'+\' + effect.STR : effect.STR;\n        }\n        if (effect.MNY) {\n          this.#effects["MNY"] = effect.MNY;\n          this.labMoneyAdd.visible = true;\n          this.labMoneyAdd.text = effect.MNY > 0 ? \'+\' + effect.MNY : effect.MNY;\n        }\n        if (effect.SPR) {\n          this.#effects["SPR"] = effect.SPR;\n          this.labSpiritAdd.visible = true;\n          this.labSpiritAdd.text = effect.SPR > 0 ? \'+\' + effect.SPR : effect.SPR;\n        }\n      }\n      switch (type) {\n        case \'EVT\':\n          return description + (postEvent ? `\\n${postEvent}` : \'\');\n        case \'TLT\':\n          return `Lucky Charm {${name}}: ${description}`;\n      }\n    }).join(\'\\n\');\n    this.#printText += "Year " + (2022 + realAge) + ", age: " + realAge + "\\n" + item.labContent.text + "\\n";\n    item.grade(content[content.length - 1].grade);\n    this.vboxTrajectory.addChild(item);\n    // this.#trajectoryItems.push(item);\n    item.y = this.vboxTrajectory.height;\n  }\n  onSummary() {\n    // trajectoryItems: this.#trajectoryItems\n    const talents = this.#talents;\n    $ui.switchView(UI.pages.SUMMARY, {\n      talents,\n      printText: this.#printText,\n      enableExtend: this.#enableExtend\n    });\n  }\n  get speed() {\n    return this.#speed;\n  }\n  set speed(speed) {\n    this.#speed = speed;\n    this.prgSpeed.value = speed / this.scbSpeed.max;\n    clearInterval(this.#auto);\n    this.#auto = null;\n    if (!speed) return;\n    this.#auto = setInterval(() => this.onNext(), 3000 * (1 - this.prgSpeed.value) + 300);\n  }\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiODMxMC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFJQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFhQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBRUE7O0FBRUE7QUFDQTtBQVlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9TYW1zYXJhLy4vc3JjL3VpL3RoZW1lcy9kZWZhdWx0L3RyYWplY3RvcnkuanM/Y2U0ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBUcmFqZWN0b3J5IGV4dGVuZHMgdWkudmlldy5EZWZhdWx0VGhlbWUuVHJhamVjdG9yeVVJIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgbGV0IHBvczEgPSBbMCwgMF07XG4gICAgICAgIHRoaXMucGFuZWxUcmFqZWN0b3J5Lm9uKExheWEuRXZlbnQuTU9VU0VfRE9XTiwgdGhpcywgZSA9PiBwb3MxID0gW2Uuc3RhZ2VYLCBlLnN0YWdlWV0pO1xuICAgICAgICB0aGlzLnBhbmVsVHJhamVjdG9yeS5vbihMYXlhLkV2ZW50Lk1PVVNFX1VQLCB0aGlzLCBlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGRpc3RhbmNlWCA9IGUuc3RhZ2VYIC0gcG9zMVswXTtcbiAgICAgICAgICAgIGNvbnN0IGRpc3RhbmNlWSA9IGUuc3RhZ2VZIC0gcG9zMVsxXTtcbiAgICAgICAgICAgIGlmKE1hdGguc3FydChNYXRoLmFicyhkaXN0YW5jZVgpICsgTWF0aC5hYnMoZGlzdGFuY2VZKSkgPiAxMCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMub25OZXh0KCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmJ0blN1bW1hcnkub24oTGF5YS5FdmVudC5DTElDSywgdGhpcywgdGhpcy5vblN1bW1hcnkpO1xuXG4gICAgICAgIHRoaXMucGFuZWxUcmFqZWN0b3J5LnZTY3JvbGxCYXIuZWxhc3RpY0Rpc3RhbmNlID0gMTUwO1xuICAgICAgICB0aGlzLnNjYlNwZWVkLm9uKExheWEuRXZlbnQuQ0hBTkdFLCB0aGlzLCAoKSA9PiB0aGlzLnNwZWVkID0gdGhpcy5zY2JTcGVlZC52YWx1ZSk7XG4gICAgICAgIHRoaXMuc2NiU3BlZWQub24oTGF5YS5FdmVudC5NT1VTRV9VUCwgdGhpcywgKCkgPT4gdGhpcy5vbk5leHQoKSk7XG4gICAgfVxuXG4gICAgQUdFID0ge1xuICAgICAgICAwOiAwLFxuICAgICAgICAxOiAxLFxuICAgICAgICAyOiAyLFxuICAgICAgICAzOiAyLFxuICAgICAgICA0OiAzLFxuICAgICAgICA1OiAzLFxuICAgICAgICA2OiA0LFxuICAgICAgICA3OiA1LFxuICAgICAgICA4OiA1LFxuICAgICAgICA5OiA2LFxuICAgICAgICAxMDogNixcbiAgICAgICAgMTE6IDcsXG4gICAgICAgIDEyOiA4LFxuICAgICAgICAxMzogOSxcbiAgICAgICAgMTQ6IDEwLFxuICAgICAgICAxNTogMTAsXG4gICAgICAgIDE2OiAxMSxcbiAgICAgICAgMTc6IDExLFxuICAgICAgICAxODogMTIsXG4gICAgICAgIDE5OiAxMixcbiAgICAgICAgMjA6IDEzLFxuICAgICAgICAyMTogMTMsXG4gICAgICAgIDIyOiAxNCxcbiAgICAgICAgMjM6IDE1LFxuICAgICAgICAyNDogMTUsXG4gICAgICAgIDI1OiAxNixcbiAgICAgICAgMjY6IDE3LFxuICAgICAgICAyNzogMTcsXG4gICAgICAgIDI4OiAxOCxcbiAgICAgICAgMjk6IDE4LFxuICAgICAgICAzMDogMTksXG4gICAgICAgIDMxOiAxOSxcbiAgICAgICAgMzI6IDIwLFxuICAgICAgICAzMzogMjAsXG4gICAgICAgIDM0OiAyMSxcbiAgICAgICAgMzU6IDIxLFxuICAgICAgICAzNjogMjIsXG4gICAgICAgIDM3OiAyMyxcbiAgICAgICAgMzg6IDIzLFxuICAgICAgICAzOTogMjQsXG4gICAgICAgIDQwOiAyNSxcbiAgICAgICAgNDE6IDI1LFxuICAgICAgICA0MjogMjYsXG4gICAgICAgIDQzOiAyNixcbiAgICAgICAgNDQ6IDI3LFxuICAgICAgICA0NTogMjcsXG4gICAgICAgIDQ2OiAyOCxcbiAgICAgICAgNDc6IDI4LFxuICAgICAgICA0ODogMjksXG4gICAgICAgIDQ5OiAyOSxcbiAgICAgICAgNTA6IDMwLFxuICAgICAgICA1MTogMzEsXG4gICAgICAgIDUyOiAzMSxcbiAgICAgICAgNTM6IDMyLFxuICAgICAgICA1NDogMzMsXG4gICAgICAgIDU1OiAzNCxcbiAgICAgICAgNTY6IDM0LFxuICAgICAgICA1NzogMzUsXG4gICAgICAgIDU4OiAzNixcbiAgICAgICAgNTk6IDM3LFxuICAgICAgICA2MDogMzcsXG4gICAgICAgIDYxOiAzOCxcbiAgICAgICAgNjI6IDM5LFxuICAgICAgICA2MzogNDAsXG4gICAgICAgIDY0OiA0MSxcbiAgICAgICAgNjU6IDQxLFxuICAgICAgICA2NjogNDIsXG4gICAgICAgIDY3OiA0MixcbiAgICAgICAgNjg6IDQzLFxuICAgICAgICA2OTogNDMsXG4gICAgICAgIDcwOiA0NCxcbiAgICAgICAgNzE6IDQ0LFxuICAgICAgICA3MjogNDUsXG4gICAgICAgIDczOiA0NixcbiAgICAgICAgNzQ6IDQ3LFxuICAgICAgICA3NTogNDgsXG4gICAgICAgIDc2OiA0OCxcbiAgICAgICAgNzc6IDQ5LFxuICAgICAgICA3ODogNTEsXG4gICAgICAgIDc5OiA1MyxcbiAgICAgICAgODA6IDU0LFxuICAgICAgICA4MTogNTQsXG4gICAgICAgIDgyOiA1NSxcbiAgICAgICAgODM6IDU2LFxuICAgICAgICA4NDogNTksXG4gICAgICAgIDg1OiA2MCxcbiAgICAgICAgODY6IDYxLFxuICAgICAgICA4NzogNjIsXG4gICAgICAgIDg4OiA2MyxcbiAgICAgICAgODk6IDY0LFxuICAgICAgICA5MDogNjUsXG4gICAgICAgIDkxOiA2NixcbiAgICAgICAgOTI6IDY4LFxuICAgICAgICA5MzogNzAsXG4gICAgICAgIDk0OiA3NyxcbiAgICAgICAgOTU6IDc4LFxuICAgICAgICA5NjogODAsXG4gICAgICAgIDk3OiA4OSxcbiAgICAgICAgOTg6IDk3LFxuICAgICAgICAxMDI6IDEwMixcbiAgICB9XG5cblxuICAgICNzcGVlZDtcbiAgICAjYXV0bztcblxuICAgIHN0YXRpYyBsb2FkKCkge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgXCJpbWFnZXMvYXRsYXMvaW1hZ2VzL3Byb2dyZXNzLmF0bGFzXCIsXG4gICAgICAgICAgICAnaW1hZ2VzL2F0bGFzL2ltYWdlcy9zbGlkZXIuYXRsYXMnLFxuICAgICAgICBdO1xuICAgIH1cblxuICAgIHN0YXRpYyAjY3JlYXRlQ29tcG9uZW50ID0gTGF5YS5wbHVnaW4uZXh0cmFjdENvbXBvbmVudHMoVHJhamVjdG9yeS51aVZpZXcsIFsnYm94VHJhamVjdG9yeUl0ZW0nXSk7XG4gICAgI2NyZWF0ZVRyYWplY3RvcnlJdGVtKCkge1xuICAgICAgICBjb25zdCBpdGVtID0gVHJhamVjdG9yeS4jY3JlYXRlQ29tcG9uZW50KCdib3hUcmFqZWN0b3J5SXRlbScpO1xuICAgICAgICBpdGVtLmxhYkNvbnRlbnQgPSBpdGVtLmdldENoaWxkQnlOYW1lKCdsYWJDb250ZW50Jyk7XG4gICAgICAgIGl0ZW0ubGFiQWdlID0gaXRlbS5nZXRDaGlsZEJ5TmFtZSgnaGJveEFnZScpLmdldENoaWxkQnlOYW1lKCdsYWJBZ2UnKTtcbiAgICAgICAgY29uc3QgY29uZmlnID0gJHVpLmNvbW1vbi50cmFqZWN0b3J5SXRlbTtcbiAgICAgICAgJF8uZGVlcE1hcFNldChpdGVtLCBjb25maWcuYm94KTtcbiAgICAgICAgaXRlbS5ncmFkZSA9IGdyYWRlID0+IHtcbiAgICAgICAgICAgICRfLmRlZXBNYXBTZXQoaXRlbSwgY29uZmlnLmdyYWRlW2dyYWRlIHx8IDBdKTtcbiAgICAgICAgfVxuICAgICAgICBpdGVtLmdldENoaWxkQnlOYW1lKCdoYm94QWdlJykuX2NoaWxkcy5mb3JFYWNoKGNoaWxkID0+IGNoaWxkLmNvbG9yID0gY29uZmlnLmFnZUNvbG9yKTtcbiAgICAgICAgaXRlbS5sYWJDb250ZW50LmNvbG9yID0gY29uZmlnLmNvbnRlbnRDb2xvcjtcbiAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgfVxuICAgICNpc0VuZDtcbiAgICAvLyAjdHJhamVjdG9yeUl0ZW1zO1xuICAgICN0YWxlbnRzO1xuICAgICNlbmFibGVFeHRlbmQ7XG4gICAgI3ByaW50VGV4dDtcbiAgICAjZWZmZWN0cztcblxuICAgIGluaXQoeyBwcm9wZXJ0eUFsbG9jYXRlLCB0YWxlbnRzLCBlbmFibGVFeHRlbmQgfSkge1xuICAgICAgICBjb25zdCB0eXBlcyA9IGNvcmUuUHJvcGVydHlUeXBlcztcbiAgICAgICAgY29uc29sZS5sb2coJ3RyYWplY3RvcnkgaW5pdCcsIHByb3BlcnR5QWxsb2NhdGUpXG4gICAgICAgIHRoaXMuI3ByaW50VGV4dCA9IFwiXCI7XG4gICAgICAgIHRoaXMuI2VmZmVjdHMgPSB7XG4gICAgICAgICAgICBcIkNIUlwiOiAwLFxuICAgICAgICAgICAgXCJJTlRcIjogMCxcbiAgICAgICAgICAgIFwiU1RSXCI6IDAsXG4gICAgICAgICAgICBcIk1OWVwiOiAwLFxuICAgICAgICAgICAgXCJTUFJcIjogMFxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5ld1Byb3BlcnR5ID0gdGhpcy5pbml0UHJvcGVydHkocHJvcGVydHlBbGxvY2F0ZSk7XG4gICAgICAgIGlmIChuZXdQcm9wZXJ0eVt0eXBlcy5BRkddID09IDEpXG4gICAgICAgICAgICB0aGlzLmxhYkNvdW50cnkudGV4dCA9IFwiQWZnYW5pc3RhblwiXG4gICAgICAgIGVsc2UgaWYgKG5ld1Byb3BlcnR5W3R5cGVzLkNITl0gPT0gMSlcbiAgICAgICAgICAgIHRoaXMubGFiQ291bnRyeS50ZXh0ID0gXCJDaGluYVwiXG4gICAgICAgIGVsc2UgaWYgKG5ld1Byb3BlcnR5W3R5cGVzLkVHUF0gPT0gMSlcbiAgICAgICAgICAgIHRoaXMubGFiQ291bnRyeS50ZXh0ID0gXCJFZ3lwdFwiXG4gICAgICAgIGVsc2UgaWYgKG5ld1Byb3BlcnR5W3R5cGVzLklORF0gPT0gMSlcbiAgICAgICAgICAgIHRoaXMubGFiQ291bnRyeS50ZXh0ID0gXCJJbmRpYVwiXG4gICAgICAgIGVsc2UgaWYgKG5ld1Byb3BlcnR5W3R5cGVzLkpQTl0gPT0gMSlcbiAgICAgICAgICAgIHRoaXMubGFiQ291bnRyeS50ZXh0ID0gXCJKYXBhblwiXG4gICAgICAgIGVsc2UgaWYgKG5ld1Byb3BlcnR5W3R5cGVzLlVTQV0gPT0gMSlcbiAgICAgICAgICAgIHRoaXMubGFiQ291bnRyeS50ZXh0ID0gXCJVU0FcIlxuXG4gICAgICAgIHRoaXMubGFiU2V4LnRleHQgPSBuZXdQcm9wZXJ0eVt0eXBlcy5MQlRRXSA9PSAxID8gXCJMQlRRXCI6IFwiU3RyYWlnaHRcIlxuXG4gICAgICAgIHRoaXMuI2VuYWJsZUV4dGVuZCA9IGVuYWJsZUV4dGVuZDtcblxuICAgICAgICB0aGlzLmJveFNwZWVkLnZpc2libGUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5zY2JTcGVlZC52YWx1ZSA9IHRoaXMuc2NiU3BlZWQubWF4ICogMC41OyAvLyBpbml0IHNwZWVkXG4gICAgICAgIHRoaXMuYnRuU3VtbWFyeS52aXNpYmxlID0gZmFsc2U7XG4gICAgICAgIC8vIHRoaXMuI3RyYWplY3RvcnlJdGVtcyA9IFtdO1xuICAgICAgICB0aGlzLiNpc0VuZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLiN0YWxlbnRzID0gdGFsZW50cztcbiAgICAgICAgY29yZS5zdGFydChuZXdQcm9wZXJ0eSk7XG4gICAgICAgIHRoaXMudXBkYXRlUHJvcGVydHkoKTtcbiAgICAgICAgdGhpcy5vbk5leHQoKTtcbiAgICB9XG5cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy5zY2JTcGVlZC52YWx1ZSA9IDA7XG4gICAgICAgIHRoaXMuc3BlZWQgPSAwO1xuICAgICAgICAvLyB0aGlzLiN0cmFqZWN0b3J5SXRlbXMuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgLy8gICAgIGl0ZW0ucmVtb3ZlU2VsZigpO1xuICAgICAgICAvLyAgICAgaXRlbS5kZXN0cm95KCk7XG4gICAgICAgIC8vIH0pO1xuICAgICAgICAvLyB0aGlzLiN0cmFqZWN0b3J5SXRlbXMgPSBudWxsO1xuICAgICAgICB0aGlzLiNwcmludFRleHQgPSBcIlwiO1xuICAgIH1cblxuICAgIGluaXRQcm9wZXJ0eShwcm9wZXJ0eUFsbG9jYXRlKSB7XG4gICAgICAgIGNvbnN0IHR5cGVzID0gY29yZS5Qcm9wZXJ0eVR5cGVzO1xuICAgICAgICB2YXIgbWF4ID0gMDtcbiAgICAgICAgdmFyIG5ld1Byb3BlcnR5ID0gcHJvcGVydHlBbGxvY2F0ZTtcbiAgICAgICAgaWYgKHByb3BlcnR5QWxsb2NhdGVbdHlwZXMuQ0hSXSA+IG1heClcbiAgICAgICAgICAgIG1heCA9IHByb3BlcnR5QWxsb2NhdGVbdHlwZXMuQ0hSXVxuICAgICAgICBpZiAocHJvcGVydHlBbGxvY2F0ZVt0eXBlcy5JTlRdID4gbWF4KVxuICAgICAgICAgICAgbWF4ID0gcHJvcGVydHlBbGxvY2F0ZVt0eXBlcy5JTlRdXG4gICAgICAgIGlmIChwcm9wZXJ0eUFsbG9jYXRlW3R5cGVzLlNUUl0gPiBtYXgpXG4gICAgICAgICAgICBtYXggPSBwcm9wZXJ0eUFsbG9jYXRlW3R5cGVzLlNUUl1cbiAgICAgICAgaWYgKHByb3BlcnR5QWxsb2NhdGVbdHlwZXMuTU5ZXSA+IG1heClcbiAgICAgICAgICAgIG1heCA9IHByb3BlcnR5QWxsb2NhdGVbdHlwZXMuTU5ZXVxuICAgICAgICBpZiAocHJvcGVydHlBbGxvY2F0ZVt0eXBlcy5TUFJdID4gbWF4KVxuICAgICAgICAgICAgbWF4ID0gcHJvcGVydHlBbGxvY2F0ZVt0eXBlcy5TUFJdXG4gICAgICAgIC8vIGlmIGFueSBwcm9wZXJ0eSA+IDgsIGFkZCA1IHRvIGFsbCBvdGhlciBwcm9wZXJ0aWVzXG4gICAgICAgIGlmIChtYXggPiA3KSB7XG4gICAgICAgICAgICBpZiAobmV3UHJvcGVydHlbdHlwZXMuQ0hSXSA8IDgpXG4gICAgICAgICAgICAgICAgbmV3UHJvcGVydHlbdHlwZXMuQ0hSXSA9IG5ld1Byb3BlcnR5W3R5cGVzLkNIUl0gPCA0ID8gbmV3UHJvcGVydHlbdHlwZXMuQ0hSXSArIDUgOiA4O1xuICAgICAgICAgICAgaWYgKG5ld1Byb3BlcnR5W3R5cGVzLklOVF0gPCA4KVxuICAgICAgICAgICAgICAgIG5ld1Byb3BlcnR5W3R5cGVzLklOVF0gPSBuZXdQcm9wZXJ0eVt0eXBlcy5JTlRdIDwgNCA/IG5ld1Byb3BlcnR5W3R5cGVzLklOVF0gKyA1IDogODtcbiAgICAgICAgICAgIGlmIChuZXdQcm9wZXJ0eVt0eXBlcy5TVFJdIDwgOClcbiAgICAgICAgICAgICAgICBuZXdQcm9wZXJ0eVt0eXBlcy5TVFJdID0gbmV3UHJvcGVydHlbdHlwZXMuU1RSXSA8IDQgPyBuZXdQcm9wZXJ0eVt0eXBlcy5TVFJdICsgNSA6IDg7XG4gICAgICAgICAgICBpZiAobmV3UHJvcGVydHlbdHlwZXMuTU5ZXSA8IDgpXG4gICAgICAgICAgICAgICAgbmV3UHJvcGVydHlbdHlwZXMuTU5ZXSA9IG5ld1Byb3BlcnR5W3R5cGVzLk1OWV0gPCA0ID8gbmV3UHJvcGVydHlbdHlwZXMuTU5ZXSArIDUgOiA4O1xuICAgICAgICAgICAgaWYgKG5ld1Byb3BlcnR5W3R5cGVzLlNQUl0gPCA4KVxuICAgICAgICAgICAgICAgIG5ld1Byb3BlcnR5W3R5cGVzLlNQUl0gPSBuZXdQcm9wZXJ0eVt0eXBlcy5TUFJdIDwgNCA/IG5ld1Byb3BlcnR5W3R5cGVzLlNQUl0gKyA1IDogODtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFByaW50aW5nIHRleHRcbiAgICAgICAgaWYgKG5ld1Byb3BlcnR5W3R5cGVzLkFGR10gPT0gMSlcbiAgICAgICAgICAgIHRoaXMuI3ByaW50VGV4dCArPSBcIkNvdW50cnk6IEFmZ2FuaXN0YW5cXG5cIlxuICAgICAgICBlbHNlIGlmIChuZXdQcm9wZXJ0eVt0eXBlcy5DSE5dID09IDEpXG4gICAgICAgICAgICB0aGlzLiNwcmludFRleHQgKz0gXCJDb3VudHJ5OiBDaGluYVxcblwiXG4gICAgICAgIGVsc2UgaWYgKG5ld1Byb3BlcnR5W3R5cGVzLkVHUF0gPT0gMSlcbiAgICAgICAgICAgIHRoaXMuI3ByaW50VGV4dCArPSBcIkNvdW50cnk6IEVneXB0XFxuXCJcbiAgICAgICAgZWxzZSBpZiAobmV3UHJvcGVydHlbdHlwZXMuSU5EXSA9PSAxKVxuICAgICAgICAgICAgdGhpcy4jcHJpbnRUZXh0ICs9IFwiQ291bnRyeTogSW5kaWFcXG5cIlxuICAgICAgICBlbHNlIGlmIChuZXdQcm9wZXJ0eVt0eXBlcy5KUE5dID09IDEpXG4gICAgICAgICAgICB0aGlzLiNwcmludFRleHQgKz0gXCJDb3VudHJ5OiBKYXBhblxcblwiXG4gICAgICAgIGVsc2UgaWYgKG5ld1Byb3BlcnR5W3R5cGVzLlVTQV0gPT0gMSlcbiAgICAgICAgICAgIHRoaXMuI3ByaW50VGV4dCArPSBcIkNvdW50cnk6IFVTQVxcblwiXG4gICAgICAgIHRoaXMuI3ByaW50VGV4dCArPSBcIlNleCBvcmllbnRhdGlvbjogXCJcbiAgICAgICAgdGhpcy4jcHJpbnRUZXh0ICs9IChuZXdQcm9wZXJ0eVt0eXBlcy5MQlRRXSA9PSAxID8gXCJMQlRRXCIgOiBcIlN0cmFpZ2h0XCIpICsgXCJcXG5cIlxuICAgICAgICB0aGlzLiNwcmludFRleHQgKz0gXCJBcHBlYXJhbmNlOiBcIiArIG5ld1Byb3BlcnR5W3R5cGVzLkNIUl0gKyBcIlxcblwiXG4gICAgICAgIHRoaXMuI3ByaW50VGV4dCArPSBcIklROiBcIiArIG5ld1Byb3BlcnR5W3R5cGVzLklOVF0gKyBcIlxcblwiXG4gICAgICAgIHRoaXMuI3ByaW50VGV4dCArPSBcIkhlYWx0aHk6IFwiICsgbmV3UHJvcGVydHlbdHlwZXMuU1RSXSArIFwiXFxuXCJcbiAgICAgICAgdGhpcy4jcHJpbnRUZXh0ICs9IFwiRmFtaWx5IHdlYWx0aDogXCIgKyBuZXdQcm9wZXJ0eVt0eXBlcy5NTlldICsgXCJcXG5cIlxuICAgICAgICB0aGlzLiNwcmludFRleHQgKz0gXCJFUTogXCIgKyBuZXdQcm9wZXJ0eVt0eXBlcy5TUFJdICsgXCJcXG5cIlxuICAgICAgICByZXR1cm4gbmV3UHJvcGVydHlcbiAgICB9XG5cbiAgICB1cGRhdGVQcm9wZXJ0eSgpIHtcbiAgICAgICAgY29uc3QgdHlwZXMgPSBjb3JlLlByb3BlcnR5VHlwZXM7XG4gICAgICAgIGNvbnN0IHByb3BlcnR5cyA9IGNvcmUucHJvcGVydHlzO1xuXG4gICAgICAgIHRoaXMubGFiQ2hhcm0udGV4dCA9IHByb3BlcnR5c1t0eXBlcy5DSFJdIC0gdGhpcy4jZWZmZWN0c1tcIkNIUlwiXTtcbiAgICAgICAgdGhpcy5sYWJJbnRlbGxpZ2VuY2UudGV4dCA9IHByb3BlcnR5c1t0eXBlcy5JTlRdIC0gdGhpcy4jZWZmZWN0c1tcIklOVFwiXTtcbiAgICAgICAgdGhpcy5sYWJTdHJlbmd0aC50ZXh0ID0gcHJvcGVydHlzW3R5cGVzLlNUUl0gLSB0aGlzLiNlZmZlY3RzW1wiU1RSXCJdO1xuICAgICAgICB0aGlzLmxhYk1vbmV5LnRleHQgPSBwcm9wZXJ0eXNbdHlwZXMuTU5ZXSAtIHRoaXMuI2VmZmVjdHNbXCJNTllcIl07XG4gICAgICAgIHRoaXMubGFiU3Bpcml0LnRleHQgPSBwcm9wZXJ0eXNbdHlwZXMuU1BSXSAtIHRoaXMuI2VmZmVjdHNbXCJTUFJcIl07XG4gICAgfVxuXG4gICAgb25OZXh0KCkge1xuICAgICAgICBpZiAodGhpcy4jaXNFbmQpIHtcbiAgICAgICAgICAgIHRoaXMuc2NiU3BlZWQudmFsdWUgPSAwO1xuICAgICAgICAgICAgdGhpcy5zcGVlZCA9IDA7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyBhZ2UsIGNvbnRlbnQsIGlzRW5kIH0gPSBjb3JlLm5leHQoKTtcbiAgICAgICAgdGhpcy4jaXNFbmQgPSBpc0VuZDtcblxuICAgICAgICBpZihpc0VuZCkge1xuICAgICAgICAgICAgdGhpcy5ib3hTcGVlZC52aXNpYmxlID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmJ0blN1bW1hcnkudmlzaWJsZSA9IHRydWU7XG4gICAgICAgICAgICBMYXlhLnRpbWVyLmZyYW1lT25jZSgxLHRoaXMsKCk9PntcbiAgICAgICAgICAgICAgICB0aGlzLnBhbmVsVHJhamVjdG9yeS5zY3JvbGxUbygwLCB0aGlzLnBhbmVsVHJhamVjdG9yeS5jb250ZW50SGVpZ2h0KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gZW1wdHkgZXZlbnRzXG4gICAgICAgIGlmIChKU09OLnN0cmluZ2lmeShjb250ZW50KSA9PSBcInt9XCIpXG4gICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgdGhpcy5wYW5lbFRyYWplY3Rvcnkuc2Nyb2xsVG8oMCwgdGhpcy5wYW5lbFRyYWplY3RvcnkuY29udGVudEhlaWdodCk7XG4gICAgICAgIHRoaXMucmVuZGVyVHJhamVjdG9yeShhZ2UsIGNvbnRlbnQpO1xuXG4gICAgICAgIHRoaXMudXBkYXRlUHJvcGVydHkoKTtcbiAgICAgICAgaWYgKHRoaXMuI2lzRW5kKSByZXR1cm47XG4gICAgfVxuXG4gICAgcmVuZGVyVHJhamVjdG9yeShhZ2UsIGNvbnRlbnQpIHtcbiAgICAgICAgY29uc3QgcmVhbEFnZSA9IHRoaXMuQUdFW2FnZV07XG4gICAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLiNjcmVhdGVUcmFqZWN0b3J5SXRlbSgpO1xuICAgICAgICBpdGVtLmxhYkFnZS50ZXh0ID0gKDIwMjIgKyByZWFsQWdlKSArICdcXG4gQWdlOiAnICsgcmVhbEFnZTtcbiAgICAgICAgaXRlbS5sYWJDb250ZW50LnRleHQgPSBjb250ZW50Lm1hcChcbiAgICAgICAgICAgICh7IHR5cGUsIGRlc2NyaXB0aW9uLCBlZmZlY3QsIG5hbWUsIHBvc3RFdmVudH0pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZWZmZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlZmZlY3QuQ0hSKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiNlZmZlY3RzW1wiQ0hSXCJdID0gZWZmZWN0LkNIUjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubGFiQ2hhcm1BZGQudmlzaWJsZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxhYkNoYXJtQWRkLnRleHQgPSBlZmZlY3QuQ0hSID4gMCA/ICcrJyArIGVmZmVjdC5DSFIgOiBlZmZlY3QuQ0hSO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChlZmZlY3QuSU5UKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiNlZmZlY3RzW1wiSU5UXCJdID0gZWZmZWN0LklOVDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubGFiSW50ZWxsaWdlbmNlQWRkLnZpc2libGUgPSB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxhYkludGVsbGlnZW5jZUFkZC50ZXh0ID0gZWZmZWN0LklOVCA+IDAgPyAnKycgKyBlZmZlY3QuSU5UIDogZWZmZWN0LklOVDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoZWZmZWN0LlNUUikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4jZWZmZWN0c1tcIlNUUlwiXSA9IGVmZmVjdC5TVFI7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxhYlN0cmVuZ3RoQWRkLnZpc2libGUgPSB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxhYlN0cmVuZ3RoQWRkLnRleHQgPSBlZmZlY3QuU1RSID4gMCA/ICcrJyArIGVmZmVjdC5TVFIgOiBlZmZlY3QuU1RSO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChlZmZlY3QuTU5ZKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiNlZmZlY3RzW1wiTU5ZXCJdID0gZWZmZWN0Lk1OWTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubGFiTW9uZXlBZGQudmlzaWJsZSA9IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubGFiTW9uZXlBZGQudGV4dCA9IGVmZmVjdC5NTlkgPiAwID8gJysnICsgZWZmZWN0Lk1OWSA6IGVmZmVjdC5NTlk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGVmZmVjdC5TUFIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuI2VmZmVjdHNbXCJTUFJcIl0gPSBlZmZlY3QuU1BSO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sYWJTcGlyaXRBZGQudmlzaWJsZSA9IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubGFiU3Bpcml0QWRkLnRleHQgPSBlZmZlY3QuU1BSID4gMCA/ICcrJyArIGVmZmVjdC5TUFIgOiBlZmZlY3QuU1BSO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHN3aXRjaCh0eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ0VWVCc6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGVzY3JpcHRpb24gKyAocG9zdEV2ZW50ID8gYFxcbiR7cG9zdEV2ZW50fWAgOiAnJyk7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ1RMVCc6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYEx1Y2t5IENoYXJtIHske25hbWV9fTogJHtkZXNjcmlwdGlvbn1gO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgKS5qb2luKCdcXG4nKTtcbiAgICAgICAgdGhpcy4jcHJpbnRUZXh0ICs9IFwiWWVhciBcIiArICgyMDIyICsgcmVhbEFnZSkgKyBcIiwgYWdlOiBcIiArIHJlYWxBZ2UgKyBcIlxcblwiICsgaXRlbS5sYWJDb250ZW50LnRleHQgKyBcIlxcblwiO1xuXG4gICAgICAgIGl0ZW0uZ3JhZGUoY29udGVudFtjb250ZW50Lmxlbmd0aCAtIDFdLmdyYWRlKTtcblxuICAgICAgICB0aGlzLnZib3hUcmFqZWN0b3J5LmFkZENoaWxkKGl0ZW0pO1xuICAgICAgICAvLyB0aGlzLiN0cmFqZWN0b3J5SXRlbXMucHVzaChpdGVtKTtcbiAgICAgICAgaXRlbS55ID0gdGhpcy52Ym94VHJhamVjdG9yeS5oZWlnaHQ7XG4gICAgfVxuXG4gICAgb25TdW1tYXJ5KCkge1xuICAgICAgICAvLyB0cmFqZWN0b3J5SXRlbXM6IHRoaXMuI3RyYWplY3RvcnlJdGVtc1xuICAgICAgICBjb25zdCB0YWxlbnRzID0gdGhpcy4jdGFsZW50cztcbiAgICAgICAgJHVpLnN3aXRjaFZpZXcoVUkucGFnZXMuU1VNTUFSWSwgeyB0YWxlbnRzLCBwcmludFRleHQ6IHRoaXMuI3ByaW50VGV4dCwgZW5hYmxlRXh0ZW5kOiB0aGlzLiNlbmFibGVFeHRlbmR9KTtcbiAgICB9XG5cbiAgICBnZXQgc3BlZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNzcGVlZDtcbiAgICB9XG5cbiAgICBzZXQgc3BlZWQoc3BlZWQpIHtcbiAgICAgICAgdGhpcy4jc3BlZWQgPSBzcGVlZDtcbiAgICAgICAgdGhpcy5wcmdTcGVlZC52YWx1ZSA9IHNwZWVkIC8gdGhpcy5zY2JTcGVlZC5tYXg7XG4gICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy4jYXV0byk7XG4gICAgICAgIHRoaXMuI2F1dG8gPSBudWxsO1xuICAgICAgICBpZighc3BlZWQpIHJldHVybjtcbiAgICAgICAgdGhpcy4jYXV0byA9IHNldEludGVydmFsKFxuICAgICAgICAgICAgKCkgPT4gdGhpcy5vbk5leHQoKSxcbiAgICAgICAgICAgIDMwMDAgKiAoMSAtIHRoaXMucHJnU3BlZWQudmFsdWUpICsgMzAwXG4gICAgICAgICk7XG4gICAgfVxufSJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///8310\n')}}]);